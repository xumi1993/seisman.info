<!doctype html><html class="theme-next pisces"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="YtIwelKWFVHPXmIvYL-XxbDiILIPD0B7CKo16OVMYsM"><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css"><meta name="keywords" content="走时,TauP,震相,"><link rel="alternate" href="/atom.xml" title="SeisMan" type="application/atom+xml"><meta name="description" content="在使用 TauP 计算 浅源近震 的 P 波走时时，输出中经常会出现很多个 P 震相。这个事情让人很困扰， 因为搞不清这些 P 震相到底谁是谁。如果需要的只是 P 波初至，那就无所谓了，直接用最早的到时即可。 有些时候需要计算某个特定 P 震相的走时，这就需要清楚地了解每个 P 震相所代表的真正路径了。"><meta name="keywords" content="走时,TauP,震相"><meta property="og:type" content="article"><meta property="og:title" content="识别 TauP 输出中的多个 P 震相"><meta property="og:url" content="http://seisman.info/taup-identify-multiple-P-phases.html"><meta property="og:site_name" content="SeisMan"><meta property="og:description" content="在使用 TauP 计算 浅源近震 的 P 波走时时，输出中经常会出现很多个 P 震相。这个事情让人很困扰， 因为搞不清这些 P 震相到底谁是谁。如果需要的只是 P 波初至，那就无所谓了，直接用最早的到时即可。 有些时候需要计算某个特定 P 震相的走时，这就需要清楚地了解每个 P 震相所代表的真正路径了。"><meta property="og:updated_time" content="2017-04-28T04:44:34.318Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="识别 TauP 输出中的多个 P 震相"><meta name="twitter:description" content="在使用 TauP 计算 浅源近震 的 P 波走时时，输出中经常会出现很多个 P 震相。这个事情让人很困扰， 因为搞不清这些 P 震相到底谁是谁。如果需要的只是 P 波初至，那就无所谓了，直接用最早的到时即可。 有些时候需要计算某个特定 P 震相的走时，这就需要清楚地了解每个 P 震相所代表的真正路径了。"><script type="text/javascript" id="hexo.configuration">var NexT=window.NexT||{},CONFIG={scheme:"Pisces",sidebar:{position:"left",display:"post"},fancybox:!0,motion:!1,duoshuo:{userId:0,author:"博主"}}</script><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png?v=2.0"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png?v=2.0"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png?v=2.0"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png?v=2.0"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png?v=2.0"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png?v=2.0"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png?v=2.0"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png?v=2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png?v=2.0"><link rel="icon" type="image/png" href="/images/favicon-32x32.png?v=2.0" sizes="32x32"><link rel="icon" type="image/png" href="/images/android-chrome-192x192.png?v=2.0" sizes="192x192"><link rel="icon" type="image/png" href="/images/favicon-96x96.png?v=2.0" sizes="96x96"><link rel="icon" type="image/png" href="/images/favicon-16x16.png?v=2.0" sizes="16x16"><link rel="manifest" href="/images/manifest.json?v=2.0"><link rel="mask-icon" href="/images/safari-pinned-tab.svg?v=2.0" color="#5bbad5"><link rel="shortcut icon" href="/images/favicon.ico?v=2.0"><meta name="apple-mobile-web-app-title" content="SeisMan"><meta name="application-name" content="SeisMan"><meta name="msapplication-TileColor" content="#9f00a7"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png?v=2.0"><meta name="msapplication-config" content="/images/browserconfig.xml?v=2.0"><meta name="theme-color" content="#ffffff"><title> 识别 TauP 输出中的多个 P 震相 | SeisMan</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container one-collumn sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">SeisMan</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">学会整理自己的经验是科研的第一步。</p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-collections"><a href="/collections.html" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br> 合集</a></li><li class="menu-item menu-item-links"><a href="/links.html" rel="section"><i class="menu-item-icon fa fa-fw fa-link"></i><br> 链接</a></li><li class="menu-item menu-item-donations"><a href="/donations.html" rel="section"><i class="menu-item-icon fa fa-fw fa-rmb"></i><br> 捐赠</a></li><li class="menu-item menu-item-about"><a href="/about.html" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br> 关于</a></li><li class="menu-item menu-item-search"><a href="#" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" id="local-search-input"><div id="local-search-result"></div> <span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"> 识别 TauP 输出中的多个 P 震相</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2016-05-22T03:46:41+00:00" content="2016-05-22">2016-05-22</time></span> <span class="post-category">&nbsp; | &nbsp;<span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/地震学软件/" itemprop="url" rel="index"><span itemprop="name">地震学软件</span></a></span></span> <span class="post-comments-count">&nbsp; | &nbsp;<a href="/taup-identify-multiple-P-phases.html#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="taup-identify-multiple-P-phases.html" itemprop="commentsCount"></span></a></span> &nbsp; | &nbsp;<span class="viewraw-icons"><a href="https://github.com/seisman/seisman.info.posts/raw/master/_posts/2016-05-22-taup-identify-multiple-P-phases.md" title="查看源代码" target="_blank"><i class="fa fa-file-text-o"></i></a></span><span class="viewraw-icons"><a href="https://github.com/seisman/seisman.info.posts/commits/master/_posts/2016-05-22-taup-identify-multiple-P-phases.md" title="查看修改历史" target="_blank"><i class="fa fa-history"></i></a></span><span class="viewraw-icons"><a href="//o7sbpc9b9.qnssl.com/pdfs/2016-05-22-taup-identify-multiple-P-phases.pdf" title="下载PDF" target="_blank"><i class="fa fa-file-pdf-o"></i></a></span><div class="post-tags"> <a href="/tags/走时/" rel="tag">#走时</a> <a href="/tags/TauP/" rel="tag">#TauP</a> <a href="/tags/震相/" rel="tag">#震相</a></div></div></header><div class="post-body" itemprop="articleBody"><p>在使用 TauP 计算 <strong>浅源近震</strong> 的 P 波走时时，输出中经常会出现很多个 P 震相。这个事情让人很困扰， 因为搞不清这些 P 震相到底谁是谁。如果需要的只是 P 波初至，那就无所谓了，直接用最早的到时即可。 有些时候需要计算某个特定 P 震相的走时，这就需要清楚地了解每个 P 震相所代表的真正路径了。</p><a id="more"></a><p>以最简单也最常用的 PREM 模型为例， TauP 中给出了 PREM 模型的前几列如下：</p><pre><code>$ head -10 prem.nd
    0.00     5.80000   3.20000   2.60000    1456.0     600.0
   15.00     5.80000   3.20000   2.60000    1456.0     600.0
   15.00     6.80000   3.90000   2.90000    1350.0     600.0
   24.40     6.80000   3.90000   2.90000    1350.0     600.0
mantle
   24.40     8.11061   4.49094   3.38076    1446.0     600.0
   40.00     8.10119   4.48486   3.37906    1446.0     600.0
   60.00     8.08907   4.47715   3.37688    1447.0     600.0
   80.00     8.07688   4.46953   3.37471     195.0      80.0
  115.00     8.05540   4.45643   3.37091     195.0      80.0</code></pre><p>可以看到，15 km 处是上下地壳的分界面，24.4 km 是 Moho 面。</p><p>那么，对于一个深度为 5 km 的震源来说，在小震中距时可能会有 5 个 P 波震相：</p><ol style="list-style-type:decimal"><li>震相 1： 从源出发向上传播直接到台站</li><li>震相 2：15 km 界面的反射波</li><li>震相 3：15 km 界面处的首波</li><li>震相 4：Moho 面的反射波</li><li>震相 5：Moho 面的首波</li></ol><p>下面的命令计算了震源深度 5 km，震中距 100 km 处的 P 波震相走时。</p><pre><code>$ taup_time -mod prem -h 5 -km 100 -ph p,P

Model: prem
Distance   Depth   Phase   Travel    Ray Param  Takeoff  Incident  Purist    Purist
  (deg)     (km)   Name    Time (s)  p (s/deg)   (deg)    (deg)   Distance   Name
-----------------------------------------------------------------------------------
    0.90     5.0   P         16.81    13.657     45.47    45.43     0.90   = P
    0.90     5.0   P         16.93    16.313     58.38    58.31     0.90   = P
    0.90     5.0   p         17.26    19.135    -87.30    86.48     0.90   = p
    0.90     5.0   P         17.33    15.646     54.76    54.70     0.90   = P
    0.90     5.0   P         17.75    18.571     75.80    75.62     0.90   = P</code></pre><p>输出的 5 个 P 震相与之前的预期相同，很明显输出的第三行对应震相 1，也就是 p 震相。</p><p>那么如何确定其他震相的身份呢？当然可以通过射线参数、出射角等信息判断，但是如上面的输出所示，其实 很困难。最好的解决办法是，利用 TauP 强大的震相命名功能来指定计算特定震相的到时。例如， <code>Pn</code> 代表 Moho 面的首波， <code>Pv15P</code> 代表 15 km 界面的反射波， <code>PvmP</code> 代表 Moho 界面反射波。</p><pre><code>$ taup_time -mod prem -h 5 -km 100 -ph p,P,Pn,Pg,Pv15P,PvmP,Pv24.4P

Model: prem
Distance   Depth   Phase     Travel    Ray Param  Takeoff  Incident  Purist    Purist
  (deg)     (km)   Name      Time (s)  p (s/deg)   (deg)    (deg)   Distance   Name
-------------------------------------------------------------------------------------
    0.90     5.0   P           16.81    13.657     45.47    45.43     0.90   = P
    0.90     5.0   Pn          16.81    13.657     45.47    45.43     0.90   = Pn
    0.90     5.0   P           16.93    16.313     58.38    58.31     0.90   = P
    0.90     5.0   Pg          16.93    16.313     58.38    58.31     0.90   = Pg
    0.90     5.0   p           17.26    19.135    -87.30    86.48     0.90   = p
    0.90     5.0   P           17.33    15.646     54.76    54.70     0.90   = P
    0.90     5.0   PvmP        17.33    15.646     54.76    54.70     0.90   * Pv24.4P
    0.90     5.0   Pv24.4P     17.33    15.646     54.76    54.70     0.90   = Pv24.4P
    0.90     5.0   P           17.75    18.571     75.80    75.62     0.90   = P
    0.90     5.0   Pg          17.75    18.571     75.80    75.62     0.90   = Pg
    0.90     5.0   Pv15P       17.75    18.571     75.80    75.62     0.90   = Pv15P</code></pre><p>从这个命令的输出中可以提取出很多信息：</p><ol style="list-style-type:decimal"><li>第 1 行和第 2 行是同一个震相，即 Pn，也就是 Moho 界面的首波。同时也说明，震相名 P 包括了反射波、首波等</li><li>第 3 行与第 4 行是同一个震相，即 Pg，也就是地壳内 turning 的波</li><li>第 5 行是上行波 p，这个很明显了</li><li>第 6-8 行是同一个震相，是 Moho 界面的反射波，这个震相可以用 P、PvmP 或 Pv24.4P</li><li>第 9-11 行是同一个震相，是 15 km 界面的反射波</li></ol><p>5 个震相中有四个的路径已经很确定了，唯一不确定的就是第 3-4 行这个震相。其实跟前面的理论与其对比一下 可以猜出来，这个震相应该是 15 km 界面的首波。那么如何证明呢？方法很简单，把 PREM 模型中 Moho 界面 的深度改到 15 km，此时计算出的 Pn 就是 15 km 界面的首波了。</p><p>修改后的 <code>prem2.nd</code> 的前几行内容如下（其实只是修改了 <code>mantle</code> 这一行的位置）：</p><pre><code>$ head -10 prem.nd
    0.00     5.80000   3.20000   2.60000    1456.0     600.0
   15.00     5.80000   3.20000   2.60000    1456.0     600.0
mantle
   15.00     6.80000   3.90000   2.90000    1350.0     600.0
   24.40     6.80000   3.90000   2.90000    1350.0     600.0
   24.40     8.11061   4.49094   3.38076    1446.0     600.0
   40.00     8.10119   4.48486   3.37906    1446.0     600.0
   60.00     8.08907   4.47715   3.37688    1447.0     600.0
   80.00     8.07688   4.46953   3.37471     195.0      80.0
  115.00     8.05540   4.45643   3.37091     195.0      80.0</code></pre><p>执行相同的命令，可以看到</p><pre><code>$ taup_time -mod prem2 -h 5 -km 100 -ph p,P,Pn,Pg,Pv15P,PvmP,Pv24.4P

Model: prem2
Distance   Depth   Phase     Travel    Ray Param  Takeoff  Incident  Purist    Purist
  (deg)     (km)   Name      Time (s)  p (s/deg)   (deg)    (deg)   Distance   Name
-------------------------------------------------------------------------------------
    0.90     5.0   P           16.81    13.657     45.47    45.43     0.90   = P
    0.90     5.0   P           16.93    16.313     58.38    58.31     0.90   = P
    0.90     5.0   Pn          16.93    16.314     58.39    58.31     0.90   = Pn
    0.90     5.0   p           17.26    19.135    -87.30    86.48     0.90   = p
    0.90     5.0   P           17.33    15.646     54.76    54.70     0.90   = P
    0.90     5.0   Pv24.4P     17.33    15.646     54.76    54.70     0.90   = Pv24.4P
    0.90     5.0   P           17.75    18.571     75.80    75.62     0.90   = P
    0.90     5.0   Pv15P       17.75    18.571     75.80    75.62     0.90   = Pv15P
    0.90     5.0   PvmP        17.75    18.571     75.80    75.62     0.90   * Pv15P</code></pre><p>新模型下 Moho 界面在 15 km 处，所以此时 PvmP 是 15 km 的反射波，而 Pn 则是 15 km 的首波。</p><p>至此，所有的 5 个 P 震相都被正确识别出来啦。对于更复杂的速度模型，判断方法类似。</p><p>结合以上的分析，总结出来震相走时方面的几个需要注意的地方：</p><ol style="list-style-type:decimal"><li>首波在某些震中距会比反射波快（这在地震学基础中已经提到了）</li><li>浅部界面的反射波并不一定比深部界面的反射波更早到（此处 Pv15P 晚于 Pv24.4P）</li><li>除了 Pn 之外最早到的震相不一定就是直达波或反射波，也有可能是其他界面的首波（此处 15 km 界面的首波是除 Pn 外最早到的）</li></ol></div><footer class="post-footer"><div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'> <span>赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/images/wechatpay.png" alt="SeisMan WeChat Pay"><p>微信打赏</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/images/alipay.png" alt="SeisMan Alipay"><p>支付宝打赏</p></div></div></div></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/iris-syngine.html" rel="next" title="IRIS 的理论地震图生成引擎"><i class="fa fa-chevron-left"></i> IRIS 的理论地震图生成引擎</a></div><div class="post-nav-prev post-nav-item"> <a href="/taup-custom-models.html" rel="prev" title="TauP 自定义模型">TauP 自定义模型<i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="disqus_thread"><noscript> Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview"> 站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="SeisMan"><p class="site-author-name" itemprop="name">SeisMan</p><p class="site-description motion-element" itemprop="description">地球物理学在读博士</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives"><span class="site-state-item-count">192</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories"><span class="site-state-item-count">8</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags"><span class="site-state-item-count">82</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/seisman" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://movie.douban.com/people/131919859/" target="_blank" title="豆瓣电影"><i class="fa fa-fw fa-film"></i> 豆瓣电影</a></span><span class="links-of-author-item"><a href="http://music.163.com/#/user/home?id=17736457" target="_blank" title="网易云音乐"><i class="fa fa-fw fa-music"></i> 网易云音乐</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-globe"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="http://seispider.top/" title="SeisPider" target="_blank">SeisPider</a></li><li class="links-of-blogroll-item"> <a href="http://blog.wangliang.one/" title="王亮的博客" target="_blank">王亮的博客</a></li></ul></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><p class="post-toc-empty">此文章未包含目录</p></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2013 - <span itemprop="copyrightYear">2017</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">SeisMan</span></div><div class="powered-by"> 由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动</div><div class="theme-info"> 主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script><script type="text/javascript">function run_disqus_script(s){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/"+s,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}var disqus_shortname="seisman",disqus_identifier="taup-identify-multiple-P-phases.html",disqus_title="识别 TauP 输出中的多个 P 震相",disqus_url="http://seisman.info/taup-identify-multiple-P-phases.html";run_disqus_script("count.js"),run_disqus_script("embed.js")</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),s=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!0,s=r.title.trim().toLowerCase(),n=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),o=r.url,i=-1,l=-1,p=-1;if(""!=s&&""!=n&&a.forEach(function(e,t){i=s.indexOf(e),l=n.indexOf(e),i<0&&l<0?c=!1:(l<0&&(l=0),0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+o+"' class='search-result-title'>"+s+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),s.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").mousedown(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script></body></html>