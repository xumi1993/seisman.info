<!doctype html><html class="theme-next pisces"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="google-site-verification" content="YtIwelKWFVHPXmIvYL-XxbDiILIPD0B7CKo16OVMYsM"><link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css"><meta name="keywords" content="震源机制解,"><link rel="alternate" href="/atom.xml" title="SeisMan" type="application/atom+xml"><meta name="description" content="gCAP 是 Prof. Lupei Zhu 发展的一种反演震源机制解的一种方法。目前该代码已经开源。"><meta name="keywords" content="震源机制解"><meta property="og:type" content="article"><meta property="og:title" content="gCAP 的安装"><meta property="og:url" content="http://seisman.info/install-gcap.html"><meta property="og:site_name" content="SeisMan"><meta property="og:description" content="gCAP 是 Prof. Lupei Zhu 发展的一种反演震源机制解的一种方法。目前该代码已经开源。"><meta property="og:updated_time" content="2016-04-06T16:00:00.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="gCAP 的安装"><meta name="twitter:description" content="gCAP 是 Prof. Lupei Zhu 发展的一种反演震源机制解的一种方法。目前该代码已经开源。"><script type="text/javascript" id="hexo.configuration">var NexT=window.NexT||{},CONFIG={scheme:"Pisces",sidebar:{position:"left",display:"post"},fancybox:!0,motion:!1,duoshuo:{userId:0,author:"博主"}}</script><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png?v=2.0"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png?v=2.0"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png?v=2.0"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png?v=2.0"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png?v=2.0"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png?v=2.0"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png?v=2.0"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png?v=2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png?v=2.0"><link rel="icon" type="image/png" href="/images/favicon-32x32.png?v=2.0" sizes="32x32"><link rel="icon" type="image/png" href="/images/android-chrome-192x192.png?v=2.0" sizes="192x192"><link rel="icon" type="image/png" href="/images/favicon-96x96.png?v=2.0" sizes="96x96"><link rel="icon" type="image/png" href="/images/favicon-16x16.png?v=2.0" sizes="16x16"><link rel="manifest" href="/images/manifest.json?v=2.0"><link rel="mask-icon" href="/images/safari-pinned-tab.svg?v=2.0" color="#5bbad5"><link rel="shortcut icon" href="/images/favicon.ico?v=2.0"><meta name="apple-mobile-web-app-title" content="SeisMan"><meta name="application-name" content="SeisMan"><meta name="msapplication-TileColor" content="#9f00a7"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png?v=2.0"><meta name="msapplication-config" content="/images/browserconfig.xml?v=2.0"><meta name="theme-color" content="#ffffff"><title> gCAP 的安装 | SeisMan</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container one-collumn sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">SeisMan</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">学会整理自己的经验是科研的第一步。</p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-collections"><a href="/collections.html" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i><br> 合集</a></li><li class="menu-item menu-item-links"><a href="/links.html" rel="section"><i class="menu-item-icon fa fa-fw fa-link"></i><br> 链接</a></li><li class="menu-item menu-item-donations"><a href="/donations.html" rel="section"><i class="menu-item-icon fa fa-fw fa-rmb"></i><br> 捐赠</a></li><li class="menu-item menu-item-about"><a href="/about.html" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br> 关于</a></li><li class="menu-item menu-item-search"><a href="#" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" id="local-search-input"><div id="local-search-result"></div> <span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><header class="post-header"><h1 class="post-title" itemprop="name headline"> gCAP 的安装</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time itemprop="dateCreated" datetime="2014-06-12T16:00:00+00:00" content="2014-06-13">2014-06-13</time></span> <span class="post-category">&nbsp; | &nbsp;<span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a href="/categories/地震学软件/" itemprop="url" rel="index"><span itemprop="name">地震学软件</span></a></span></span> <span class="post-comments-count">&nbsp; | &nbsp;<a href="/install-gcap.html#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="install-gcap.html" itemprop="commentsCount"></span></a></span> &nbsp; | &nbsp;<span class="viewraw-icons"><a href="https://github.com/seisman/seisman.info.posts/raw/master/_posts/2014-06-13-install-gcap.md" title="查看源代码" target="_blank"><i class="fa fa-file-text-o"></i></a></span><span class="viewraw-icons"><a href="https://github.com/seisman/seisman.info.posts/commits/master/_posts/2014-06-13-install-gcap.md" title="查看修改历史" target="_blank"><i class="fa fa-history"></i></a></span><span class="viewraw-icons"><a href="//o7sbpc9b9.qnssl.com/pdfs/2014-06-13-install-gcap.pdf" title="下载PDF" target="_blank"><i class="fa fa-file-pdf-o"></i></a></span><div class="post-tags"> <a href="/tags/震源机制解/" rel="tag">#震源机制解</a></div></div></header><div class="post-body" itemprop="articleBody"><p>gCAP 是 Prof. Lupei Zhu 发展的一种反演震源机制解的一种方法。目前该代码已经开源。</p><a id="more"></a><h2 id="gcap-安装步骤">gCAP 安装步骤</h2><ol style="list-style-type:decimal"><li>下载 gCAP 源码： <a href="http://www.eas.slu.edu/People/LZhu/downloads/gcap1.0.tar" class="uri" target="_blank" rel="external">http://www.eas.slu.edu/People/LZhu/downloads/gcap1.0.tar</a></li><li><p>解压:</p><pre><code>tar -xvf gcap1.0.tar</code></pre></li><li><p>清理垃圾文件</p><p>软件包在发布的时候，没有做一些清理，遗留了一些没有用的临时文件，看起来很碍眼:</p><pre><code>rm junk.ps junk.out .gmtcommands</code></pre></li><li><p>下载辅助代码</p><p>gCAP 使用了 Numerical Recipes（简称 NR）中的一些函数，包括 <code>matrix</code> 、 <code>free_matrix</code> 、 <code>free_convert_matrix</code> 、 <code>jacobi</code> 、 <code>eigsrt</code> 。 由于 NR 是非开源非免费的软件，所以 gCAP 并没有将 NR 相关的代码放在包里。</p><p>网络上可以下载到 NR 的完整代码，这里仅给出 gCAP 所需的部分（注：此处存在版权问题！）。 下载该压缩包，解压，并将解压后的源代码放到 gCAP 的目录中。</p><p>gCAP_util 下载：<a href="http://seisman.qiniudn.com/downloads/gcap_utils.tar.gz" target="_blank" rel="external">gcap_utils.tar.gz</a></p></li><li><p>新的 Makefile</p><p>软件包自带的 Makefile 无法使用，因而对其进行了一些修改。修改幅度稍大，几乎算是重写了。</p><p>新 Makefile 下载地址：<a href="http://seisman.qiniudn.com/downloads/Makefile.gCAP" target="_blank" rel="external">Makefile.gCAP</a></p><p>下载之后，将其重命名为 Makefile，替换原目录中的同名文件，并根据自身情况修改 Makefile 文件中的 变量 <code>SACHOME</code> 、 <code>FC</code> 、<code>CC</code> 。</p></li><li><p>编译:</p><pre><code>make</code></pre></li><li><p>修改环境变量</p><p>要想在终端运行 gcap，需要系统能够正确找到二进制文件 <code>cap</code> 、<code>cap_dir</code> 、 <code>mtdcmp</code> 、 <code>radpttn</code> 以及脚本文件 <code>cap.pl</code> 和 <code>depth.pl</code>。</p><p>直接将 gcap 的源码路径加入到 PATH 环境变量中，即在 <code>~/.bashrc</code> 中加入类似如下语句:</p><pre><code>export PATH=/path/to/gcap:${PATH}</code></pre></li><li><p>修改脚本 <code>cap.pl</code></p><p><code>cap.pl</code> 中第 15 行与第 19 行包含了两个绝对路径，需要根据自身情况进行修改。</p><ul><li>第15行： <code>require &quot;$home/Src/cap/cap_plt.pl&quot;;</code> 中的路径改成 <code>cap_plt.pl</code> 的绝对路径，类似于 <code>require &quot;/path/to/gcap/cap_plt.pl&quot;</code></li><li>第19行： <code>$green</code> 是自己计算的格林函数库的位置。如果你不知道如何修改的话，就直接用默认值，并使用命令 <code>mkdir ~/data/models/Glib</code> 新建这个目录。</li></ul></li><li><p>修改绘图脚本 <code>cap_plt.pl</code></p><p>使用默认的脚本运行并绘图后，可能会发现整个图片都缩在图片的左下角的一个小区域 内，与示例中的图片相比有较大差别。出现这个错误的主要原因是，Prof. Zhu 的 GMT 默认 使用了 US 单位制，脚本中所有未显式指定单位的值使用的都是 inch，而其他人通常使用的都 是 SI 单位制，会将这些未显式指定单位的值使用默认单位 cm。</p><p>解决办法是，在 <code>cap_plt.pl</code> 的第 6 行之后加上如下语句:</p><pre><code>system &quot;gmtset MEASURE_UNIT inch&quot;;
system &quot;gmtset PAGE_ORIENTATION portrait&quot;;</code></pre><p>这两句的作用是设置默认单位为英寸，并设置纸张方向为 portrait 模式。</p></li></ol><h2 id="运行-gcap">运行 gcap</h2><p>在终端直接执行:</p><pre><code>$ cap.pl</code></pre><p>就会出现软件的用法说明。</p><p>软件包中自带了一个示例数据，下面来复现一下这个示例。</p><h3 id="用-fk-构建格林函数库">用 fk 构建格林函数库</h3><p>要运行 gcap，使用要使用 fk 建立格林函数库。如果你不知道 fk 是什么，请参考：</p><ol style="list-style-type:decimal"><li><a href="/fk-installation.html">安装fk</a></li><li><a href="/fk-notes.html">fk 用法笔记</a></li></ol><p>要建立格林函数库，首先需要一个模型文件。gcap 的示例使用的是一个名为 cus 的模型，由于 gcap 没有使用 cus 这个模型文件，所以这里使用的是 fk 自带的 hk 模型。</p><pre><code># 切换到格林函数库所在目录
$ cd ~/data/models/Glib
# 为 hk 模型新建目录
$ mkdir hk
$ cd hk
# 将 fk 自带的 hk 模型文件复制到当前目录下
$ cp /path/to/fk/hk .
# 用 fk 计算格林函数库
$ fk.pl -Mhk/15/k -N512/0.2 -S2 05 10 15 20 25 30 35 40 45 50 55 60 65 70 75 80 85 90 95 100 105 110 115 120 125 130 135 140 145 150 155 160 165 170 175 180 185 190 195 200 205 210 215 220 225 230 235 240 245 250 255 260 265 270 275 280 285 290 295 300 305 310 315 320 325 330 335 340 345 350 355 360 365 370 375 380 385 390 395 400 405 410 415
$ fk.pl -Mhk/15/k -N512/0.2 -S0 05 10 15 20 25 30 35 40 45 50 55 60 65 70 75 80 85 90 95 100 105 110 115 120 125 130 135 140 145 150 155 160 165 170 175 180 185 190 195 200 205 210 215 220 225 230 235 240 245 250 255 260 265 270 275 280 285 290 295 300 305 310 315 320 325 330 335 340 345 350 355 360 365 370 375 380 385 390 395 400 405 410 415</code></pre><p><code>-M</code> 选项中 15 代表震源深度是 15 km，你可以从 1 km 一直算到 40 km 甚至更深，此处只算了 15 km 以供示例使用。</p><h3 id="运行-gcap-示例">运行 gcap 示例</h3><pre><code># 切换回 gcap 目录
$ cd /path/to/gcap
# 为了防止误操作，先将自带的示例备份一下
$ cp -r 20080418093700 20080418093700.bak
# 运行 gcap 示例
$ cap.pl -H0.2 -P0.3 -S2/5/0 -T35/70 -F -D2/1/0.5 -C0.05/0.3/0.02/0.1 -W1 -X10 -Mhk_15/5.0 20080418093700</code></pre><p>运行该示例所使用的参数来自于 <code>cap.pl</code> 命令的说明文档，请自行查阅以了解每个参数的含义。 <code>-Mhk_15/5.0</code> 选项表示使用 hk 模型、震源深度为 15 km处的格林函数。</p><p>执行完毕后，会生成 <code>hk_15.ps</code> 和 <code>hk_15.out</code>，将其与示例自带的 <code>cus_15.ps</code> 和 <code>cus_15.out</code> 对比可发现，二者基本完全一致。</p><h2 id="关于段错误的说明">关于段错误的说明</h2><p>若直接运行二进制文件 <code>cap</code> 会出现段错误:</p><pre><code>$ cap
[1]    12763 segmentation fault  cap</code></pre><p>这是因为 <code>cap</code> 命令行中需要一个参数。记住，直接使用 <code>cap.pl</code> ，不要直接使用 <code>cap</code>。</p><h2 id="关于-gcap3d-的说明">关于 gCAP3D 的说明</h2><p>gCAP3D 是在 gCAP 的基础上修改得到的，与 gCAP 的区别在于其可以使用三维格林函数。 该代码也已经开源。</p><p>gCAP 和 gCAP3D 之间没有本质区别，本文的介绍以 gCAP 为准，在最后会介绍安装方法上 gCAP3D 与 gCAP 的不同。</p><p>gCAP3D 的安装与 gCAP 的步骤几乎完全相同（部分文件名以及行号可能不一致，读者自行判断），区别列出如下：</p><ul><li>下载地址： <a href="http://www.eas.slu.edu/People/LZhu/downloads/gCAP3D1.0.tar" class="uri" target="_blank" rel="external">http://www.eas.slu.edu/People/LZhu/downloads/gCAP3D1.0.tar</a></li><li>Makefile 下载地址： <a href="http://seisman.qiniudn.com/downloads/Makefile.gCAP3D" class="uri" target="_blank" rel="external">http://seisman.qiniudn.com/downloads/Makefile.gCAP3D</a></li></ul><h2 id="修订历史">修订历史</h2><ul><li>2014-06-13：初稿；</li><li>2016-03-12：加入了对 gCAP3D 的说明；</li><li>2016-04-07：微调文章结构，加入了对段错误的说明；</li><li>2016-07-31：完善了示例；</li></ul></div><footer class="post-footer"><div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>坚持原创技术分享，您的支持将鼓励我继续创作！</div> <button id="rewardButton" disable="enable" onclick='var e=document.getElementById("QR");"none"===e.style.display?e.style.display="block":e.style.display="none"'> <span>赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/images/wechatpay.png" alt="SeisMan WeChat Pay"><p>微信打赏</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/images/alipay.png" alt="SeisMan Alipay"><p>支付宝打赏</p></div></div></div></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/change-background-color-of-window-in-sac.html" rel="next" title="SAC 修改绘图窗口的背景色"><i class="fa fa-chevron-left"></i> SAC 修改绘图窗口的背景色</a></div><div class="post-nav-prev post-nav-item"> <a href="/double-y-axis-plot.html" rel="prev" title="GMT 绘制双 Y 轴">GMT 绘制双 Y 轴<i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="disqus_thread"><noscript> Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview"> 站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="SeisMan"><p class="site-author-name" itemprop="name">SeisMan</p><p class="site-description motion-element" itemprop="description">地球物理学在读博士</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives"><span class="site-state-item-count">192</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories"><span class="site-state-item-count">8</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags"><span class="site-state-item-count">82</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/seisman" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="https://movie.douban.com/people/131919859/" target="_blank" title="豆瓣电影"><i class="fa fa-fw fa-film"></i> 豆瓣电影</a></span><span class="links-of-author-item"><a href="http://music.163.com/#/user/home?id=17736457" target="_blank" title="网易云音乐"><i class="fa fa-fw fa-music"></i> 网易云音乐</a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-globe"></i> 友情链接</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"> <a href="http://seispider.top/" title="SeisPider" target="_blank">SeisPider</a></li><li class="links-of-blogroll-item"> <a href="http://blog.wangliang.one/" title="王亮的博客" target="_blank">王亮的博客</a></li></ul></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#gcap-安装步骤"><span class="nav-number">1.</span> <span class="nav-text">gCAP 安装步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#运行-gcap"><span class="nav-number">2.</span> <span class="nav-text">运行 gcap</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#用-fk-构建格林函数库"><span class="nav-number">2.1.</span> <span class="nav-text">用 fk 构建格林函数库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#运行-gcap-示例"><span class="nav-number">2.2.</span> <span class="nav-text">运行 gcap 示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关于段错误的说明"><span class="nav-number">3.</span> <span class="nav-text">关于段错误的说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#关于-gcap3d-的说明"><span class="nav-number">4.</span> <span class="nav-text">关于 gCAP3D 的说明</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修订历史"><span class="nav-number">5.</span> <span class="nav-text">修订历史</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2013 - <span itemprop="copyrightYear">2017</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">SeisMan</span></div><div class="powered-by"> 由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动</div><div class="theme-info"> 主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script><script type="text/javascript">function run_disqus_script(s){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+disqus_shortname+".disqus.com/"+s,(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}var disqus_shortname="seisman",disqus_identifier="install-gcap.html",disqus_title="gCAP 的安装",disqus_url="http://seisman.info/install-gcap.html";run_disqus_script("count.js"),run_disqus_script("embed.js")</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),s=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);s.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!0,s=r.title.trim().toLowerCase(),n=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),o=r.url,i=-1,l=-1,p=-1;if(""!=s&&""!=n&&a.forEach(function(e,t){i=s.indexOf(e),l=n.indexOf(e),i<0&&l<0?c=!1:(l<0&&(l=0),0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+o+"' class='search-result-title'>"+s+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),s.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").mousedown(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script></body></html>